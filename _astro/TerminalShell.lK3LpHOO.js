import{j as t,l as T}from"./locations.C0G2P6jE.js";import{r as s}from"./index.BVOCwoKb.js";function M(){const[c,i]=s.useState(!1),l=4e3,u=2e4;return s.useEffect(()=>{const o=setInterval(()=>{i(!0),setTimeout(()=>i(!1),l)},u);return()=>clearInterval(o)},[]),c?t.jsx("div",{className:"scanline-animated"}):null}function k(){const[c,i]=s.useState({lat:null,lon:null,label:null,method:null});return s.useEffect(()=>{const l=async()=>{try{const o=await(await fetch("https://ipapi.co/json/")).json();i({lat:o.latitude,lon:o.longitude,label:`${o.city}, ${o.country_name}`,method:"ip"})}catch{i({lat:null,lon:null,label:null,method:null})}};if(!navigator.geolocation)return l();navigator.geolocation.getCurrentPosition(u=>{const{latitude:o,longitude:d}=u.coords;i({lat:o,lon:d,label:`${o.toFixed(3)}, ${d.toFixed(3)}`,method:"gps"})},()=>{l()},{timeout:3e3})},[]),c}const P=[{id:1,lang:"fr",title:"POINT AVEUGLE",steps:["Trouve un poste d‚Äôobservation discret ou en hauteur.","Observe les flux, les mouvements, les h√©sitations.","Rep√®re une personne hors tempo, hors cadre.","Ralentis ta respiration jusqu‚Äô√† dispara√Ætre.","Rejoins la foule en silence, comme si de rien n‚Äô√©tait."]},{id:1,lang:"en",title:"BLIND SPOT",steps:["Find a discreet or elevated observation post.","Observe the flows, movements, and hesitations.","Spot someone off-beat, out of frame.","Slow your breathing until you vanish.","Rejoin the crowd in silence, as if nothing happened."]},{id:2,lang:"fr",title:"COULEUR CIBLE",steps:["Choisis une couleur. Marche jusqu‚Äô√† ce qu‚Äôelle apparaisse.","Observe celle ou celui qui la porte. Posture ? Allure ?","Synchronise ton pas sans jamais suivre.","Quand la couleur s‚Äô√©vanouit, capture ce qui reste.","Que dit cette image de toi aujourd‚Äôhui ?"]},{id:2,lang:"en",title:"TARGET COLOR",steps:["Choose a color. Walk until it appears.","Observe the person wearing it. Posture? Pace?","Synchronize your steps without following.","When the color disappears, capture what's left.","What does this image say about you today?"]},{id:3,lang:"fr",title:"R√âP√âTITION FANT√îME",steps:["Avance jusqu‚Äô√† percevoir un motif r√©p√©t√© trois fois.","√Ä chaque √©cho, progresse de 10 m√®tres.","Si le motif cesse, ferme les yeux 30 secondes.","Suis le son le plus pr√©sent, sans r√©fl√©chir.","Arriv√©¬∑e, note ce que ton corps ressent."]},{id:3,lang:"en",title:"GHOST REPETITION",steps:["Walk until you perceive a pattern repeated three times.","With each echo, advance 10 meters.","If the pattern fades, close your eyes for 30 seconds.","Follow the strongest sound, without thinking.","Once arrived, note what your body feels."]},{id:4,lang:"fr",title:"OBJETS PERDUS",steps:["Rep√®re un objet oubli√©, solitaire.","Observe-le longuement, comme une trace.","Invente son histoire, sa derni√®re mission, sa chute.","√âcris une courte fiction ou laisse un message √† c√¥t√©.","Tu viens d‚Äôactiver un r√©cit dormant."]},{id:4,lang:"en",title:"LOST OBJECTS",steps:["Spot a forgotten, solitary object.","Observe it intently, as if a trace.","Invent its story ‚Äî last mission, downfall, abandonment.","Write a short fiction or leave a message nearby.","You‚Äôve just activated a dormant narrative."]},{id:5,lang:"fr",title:"RITUEL D‚ÄôASSEMBLAGE",steps:["Cueille trois √©l√©ments du sol, insignifiants mais pr√©cis.","Assemble-les selon une intuition ou un geste spontan√©.","Donne un nom √† ce talisman : fonction, souvenir, sort.","Porte-le sur toi pendant ton d√©placement.","En fin de trajet, enterre-le, ou laisse-le en offrande."]},{id:5,lang:"en",title:"ASSEMBLY RITUAL",steps:["Gather three ground-level elements ‚Äî insignificant yet precise.","Assemble them by intuition or spontaneous gesture.","Name this talisman: function, memory, spell.","Carry it with you during your movement.","At the end of your path, bury it or offer it as a gift."]},{id:6,lang:"fr",title:"LANGAGE DES GESTES",steps:["Observe les gestes r√©currents des passants.","Choisis-en un. Imite-le discr√®tement dans ton propre corps.","Compose une phrase gestuelle de trois mouvements.","Danse-la en silence dans un lieu public.","Puis redeviens transparent¬∑e."]},{id:6,lang:"en",title:"GESTURAL LANGUAGE",steps:["Observe recurring gestures in passersby.","Choose one. Imitate it subtly in your own body.","Compose a gestural sentence of three movements.","Dance it in silence in a public space.","Then return to transparency."]},{id:7,lang:"fr",title:"TRANSMISSION",steps:["Enregistre le son ambiant de ta position.","Croise une personne avec casque ou √©couteurs.","Devine ce qu‚Äôelle √©coute selon sa d√©marche.","Tente un √©change simple : regard, sourire, mot.","Envoie ton propre son √† un¬∑e inconnu¬∑e. Capsule transmise."]},{id:7,lang:"en",title:"TRANSMISSION",steps:["Record the ambient sound of your location.","Cross paths with someone wearing headphones.","Guess what they‚Äôre listening to by their stride.","Attempt a simple exchange: glance, smile, word.","Send your sound to a stranger. Capsule transmitted."]}],O=["/audio/huburnulation.mp3","/audio/ultrafiliation.mp3","/audio/surespirable.mp3","/audio/resistransition.mp3","/audio/resistransition.mp3","/audio/predisparadis.mp3"];function B(){const{lat:c,lon:i,label:l,method:u}=k(),[o,d]=s.useState([]),S=s.useRef(null),y=s.useRef(null),[$,N]=s.useState(""),[R,A]=s.useState("loading"),[I,x]=s.useState(null),[j,w]=s.useState(null),[q,G]=s.useState(!1),[D,U]=s.useState(!1),C=typeof navigator<"u"&&navigator.language?.toLowerCase().startsWith("fr"),p=P.filter(e=>e.lang===(C?"fr":"en")).map(e=>`${e.id}. ${e.title}
* ${e.steps.join(`
* `)}`),L=e=>{if(e.key==="Enter"){const a=e.target.value.trim().toLowerCase();let n="";switch(a){case"help":n="Available commands: help, play, pause, map, locate, floxpox, clear";break;case"floxpox":n="https://websim.com/@HyperTransit/esoteric-terminal/7";break;case"play":y.current?.play(),n="‚ñ∂ Playing audio...";break;case"pause":y.current?.pause(),n="‚è∏ Audio paused.";break;case"map":n=Object.entries(T).map(([v,b])=>{const h=b.map(([f,g])=>`${f.toFixed(4)}, ${g.toFixed(4)}`);return`[${v}]
`+h.join(`
`)}).join(`

`);break;case"locate":if(!c||!i){n="‚è≥ Location not ready.";break}let r=null,m=null,E=1/0;for(const[v,b]of Object.entries(T))for(const[h,f]of b){const g=Math.sqrt(Math.pow(h-c,2)+Math.pow(f-i,2));g<E&&(E=g,r=v,m=[h,f])}r&&m?n=`[${r}]
${m[0]}, ${m[1]}`:n="‚ùå No locations available.";break;case"clear":d([]),e.target.value="";return;default:n=`Command not found: ${a}`}d(r=>[...r,`> ${a}`,n]),e.target.value=""}};return s.useEffect(()=>{S.current?.focus()},[]),s.useEffect(()=>{const e=p[Math.floor(Math.random()*p.length)];N(e)},[]),s.useEffect(()=>{const e=setTimeout(()=>{A("ready")},3e3);return()=>clearTimeout(e)},[l,u]),s.useEffect(()=>{const e=new Date().toISOString().slice(0,10),a=JSON.parse(localStorage.getItem("dailySeed"));if(a&&a.date===e)w(a.instructionIndex),x(a.musicIndex);else{const n=Math.floor(Math.random()*p.length),r=Math.floor(Math.random()*O.length);localStorage.setItem("dailySeed",JSON.stringify({date:e,instructionIndex:n,musicIndex:r})),w(n),x(r)}},[]),t.jsxs("div",{className:"term-o-rama",children:[t.jsx("img",{src:"/title_ascii.png",className:"img_title"}),t.jsxs("div",{className:"central-row",children:[t.jsx("img",{src:"/qr/uptonpark.png",alt:"QR code",className:"qr-code"}),t.jsx("div",{className:"loading-text",children:R==="loading"?t.jsxs(t.Fragment,{children:["Loading location",t.jsx("span",{className:"dots"})]}):t.jsxs(t.Fragment,{children:["üìç Location: ",l||"Unknown"," (",u,")"]})})]}),t.jsx("div",{className:"random-instruction",children:j!==null&&p[j]}),o.map((e,a)=>t.jsx("div",{className:"output-line",children:e},a)),t.jsx("input",{ref:S,type:"text",className:"cli",placeholder:"> type play to start music or help for commands",onKeyDown:L}),I!==null&&t.jsx("audio",{autoPlay:!0,loop:!0,hidden:!0,ref:y,children:t.jsx("source",{src:O[I],type:"audio/mp3"})}),t.jsx(M,{})]})}export{B as default};
